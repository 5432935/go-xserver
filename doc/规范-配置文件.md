## 配置文件规范

go-xserver 中配置可以表现为下面的形式：

  - 配置结构体

    go-xserver/common/config.go

  - 配置文件

    go-xserver/config/config.toml

    可提供工具，根据 config.go 自动生成 config.toml 模板文件（优先级低）

  - 命令行参数

    自动生成

  - 环境变量

    自动生成

以上均存在一一对应关系


## 缺省值

  - 配置文件中可以删除字段（即不配置某字段），而使用缺省值

  - 可以在`配置结构体`的 Tag 中，填写 default ，定义缺省值

## 优先级

优先级从高到低如下：

```shell
命令行参数 > 环境变量 > 配置文件 > 缺省值
```

**高优先级值覆盖低优先级的值**


## 查看命令行参数、环境变量

命令行参数、环境变量自动生成，以下命令查看：

```shell
go-xserver -h
```

目前有：

```shell
Usage:
  go-xserver [flags]

Flags:
  -a, --app string                    应用名（插件，必填）
      --common-debug                  Debug 版本标志
      --common-intranettoken string   内部服务器验证TOKEN (default "6d8f1f3a-739f-47fe-9ed1-ea39276cd10d")
      --common-logdir string          Log 路径 (default "./logs")
      --common-loglevel int           Log 等级
      --common-msgcmdoffset int       消息号 = 服务类型 * MsgCmdOffset + 数字 (default 1000)
      --common-pprof string           Http pprof 地址
      --common-version string         版本号 (default "0.0.1")
  -c, --config string                 配置目录路径 (default "../config")
      --dbaccount-addrs strings       Redis 数据库地址 (default [127.0.0.1:6379])
      --dbaccount-dbindex int         Redis DB 索引
      --dbaccount-name string         Redis 数据库名称
      --dbaccount-password string     Redis 数据库密码
      --dbmgr-addrs strings           Redis 数据库地址 (default [127.0.0.1:6379])
      --dbmgr-dbindex int             Redis DB 索引
      --dbmgr-name string             Redis 数据库名称
      --dbmgr-password string         Redis 数据库密码
      --dbserver-addrs strings        Redis 数据库地址 (default [127.0.0.1:6379])
      --dbserver-dbindex int          Redis DB 索引
      --dbserver-name string          Redis 数据库名称
      --dbserver-password string      Redis 数据库密码
      --dbtoken-addrs strings         Redis 数据库地址 (default [127.0.0.1:6379])
      --dbtoken-dbindex int           Redis DB 索引
      --dbtoken-name string           Redis 数据库名称
      --dbtoken-password string       Redis 数据库密码
  -h, --help                          help for go-xserver
      --login-listen string           登录服务器监听地址 (default ":8080")
      --login-sign1 string            用于登录验证的部分签名段 (default "5UY6$f$h")
      --login-sign2 string            用于登录验证的部分签名段 (default "3wokZB%q")
      --login-sign3 string            用于登录验证的部分签名段 (default "%2Fi9TRf")

Environment variables:
   GOXSERVER_APP
   GOXSERVER_COMMON_DEBUG
   GOXSERVER_COMMON_INTRANETTOKEN
   GOXSERVER_COMMON_LOGDIR
   GOXSERVER_COMMON_LOGLEVEL
   GOXSERVER_COMMON_MSGCMDOFFSET
   GOXSERVER_COMMON_PPROF
   GOXSERVER_COMMON_VERSION
   GOXSERVER_CONFIG
   GOXSERVER_DBACCOUNT_ADDRS
   GOXSERVER_DBACCOUNT_DBINDEX
   GOXSERVER_DBACCOUNT_NAME
   GOXSERVER_DBACCOUNT_PASSWORD
   GOXSERVER_DBMGR_ADDRS
   GOXSERVER_DBMGR_DBINDEX
   GOXSERVER_DBMGR_NAME
   GOXSERVER_DBMGR_PASSWORD
   GOXSERVER_DBSERVER_ADDRS
   GOXSERVER_DBSERVER_DBINDEX
   GOXSERVER_DBSERVER_NAME
   GOXSERVER_DBSERVER_PASSWORD
   GOXSERVER_DBTOKEN_ADDRS
   GOXSERVER_DBTOKEN_DBINDEX
   GOXSERVER_DBTOKEN_NAME
   GOXSERVER_DBTOKEN_PASSWORD
   GOXSERVER_LOGIN_LISTEN
   GOXSERVER_LOGIN_SIGN1
   GOXSERVER_LOGIN_SIGN2
   GOXSERVER_LOGIN_SIGN3
```
